@page
@model Organizainador.Pages.CalendarioModel
@{
    ViewData["Title"] = "Mi Calendario Inteligente";
}

<link rel="stylesheet" href="~/css/Calendario.css" />

@Html.AntiForgeryToken()

<div class="calendar-page-container">

    <!-- Barra lateral mejorada -->
    <div class="calendar-sidebar">

        <!-- Header con fecha y hora en tiempo real -->
        <div class="date-time-header">
            <h3>@DateTime.Now.ToString("dddd, dd 'de' MMMM", new System.Globalization.CultureInfo("es-ES"))</h3>
            <div class="current-time">@DateTime.Now.ToString("HH:mm:ss")</div>
        </div>

        <!-- Lista de eventos del día -->
        <div class="events-container">
            <h4>Eventos de Hoy</h4>
            <div class="event-list">
                @if (Model.DailyEvents != null && Model.DailyEvents.Any())
                {
                    @foreach (var evento in Model.DailyEvents.OrderBy(e => e.Start))
                    {
                        <div class="event-item" style="border-left-color: @evento.Color;">
                            <strong>@evento.Title</strong>
                            <div class="event-time">
                                @evento.Start.ToString("HH:mm")
                                @if (evento.End.HasValue)
                                {
                                    <span> - @evento.End.Value.ToString("HH:mm")</span>
                                }
                            </div>
                            @if (!string.IsNullOrEmpty(evento.Description))
                            {
                                <p>@evento.Description</p>
                            }
                        </div>
                    }
                }
                else
                {
                    <div class="no-events">
                        <strong>No hay eventos</strong>
                        <p>No tienes actividades programadas para hoy.</p>
                    </div>
                }
            </div>
        </div>

        <!-- Botones de acción -->
        <div class="action-buttons">
            <a href="/Horarios/Create" class="add-schedule-btn" title="Agregar nuevo horario">📅 Agregar Nuevo Horario</a>
            <button class="ver-mas-btn" onclick="window.location.href='/Horarios'">📋 Ver Horarios</button>
        </div>

    </div>

    <!-- Calendario principal -->
    <div class="calendar-main">
        <div id="calendar"></div>
    </div>

</div>

<!-- Floating Action Button for mobile -->
<a href="/Horarios/Create" class="fab-add-schedule" title="Agregar nuevo horario">📅</a>

<partial name="_Modal" />


@section Scripts {
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.14/index.global.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.14/locales/es.global.min.js'></script>
    <script src="~/js/Calendario.js"></script>
}